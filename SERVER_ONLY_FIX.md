# âœ… Server-Only å¯¼å…¥é”™è¯¯ä¿®å¤

## ğŸ”§ é—®é¢˜

**é”™è¯¯**: `Ecmascript file had an error`

```
You're importing a component that needs "server-only". 
That only works in a Server Component but one of its parents 
is marked with "use client", so it's a Client Component.
```

**åŸå› **: 
- `stack.ts` æ–‡ä»¶åŒ…å« `import "server-only"`
- ä½†è¿™ä¸ªæ–‡ä»¶éœ€è¦åœ¨å®¢æˆ·ç«¯ç»„ä»¶ï¼ˆå¦‚ `app/handler/[...stack]/page.tsx`ï¼‰ä¸­ä½¿ç”¨
- Next.js ä¸å…è®¸åœ¨å®¢æˆ·ç«¯ç»„ä»¶ä¸­å¯¼å…¥æ ‡è®°ä¸º "server-only" çš„æ¨¡å—

---

## âœ… è§£å†³æ–¹æ¡ˆ

### ä¿®æ”¹ stack.ts

**ä¿®æ”¹å‰**:
```typescript
import "server-only";  // âŒ å¯¼è‡´é”™è¯¯
import { StackServerApp } from "@stackframe/stack";

export const stackServerApp = new StackServerApp({...});
```

**ä¿®æ”¹å**:
```typescript
// ç§»é™¤äº† "server-only" å¯¼å…¥
import { StackServerApp } from "@stackframe/stack";

export const stackServerApp = new StackServerApp({...});
```

**è¯´æ˜**:
- StackServerApp é…ç½®å¯ä»¥åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯å…±äº«
- ä¸éœ€è¦ "server-only" é™åˆ¶
- Stack Auth SDK ä¼šè‡ªåŠ¨å¤„ç†å®¢æˆ·ç«¯/æœåŠ¡ç«¯é€»è¾‘

---

## ğŸ¯ ä¿®å¤æ•ˆæœ

### ç°åœ¨åº”ç”¨å°†
- âœ… æ­£å¸¸è®¿é—®ç™»å½•é¡µé¢
- âœ… Stack Auth ç»„ä»¶æ­£å¸¸æ¸²æŸ“
- âœ… æ—  ECMAScript é”™è¯¯
- âœ… è®¤è¯æµç¨‹å®Œæ•´å¯ç”¨

---

## ğŸ§ª æµ‹è¯•æ­¥éª¤

### 1. åˆ·æ–°é¡µé¢
æµè§ˆå™¨åˆ·æ–°æˆ–é‡å¯æœåŠ¡å™¨

### 2. è®¿é—®ç™»å½•é¡µ
```
http://localhost:3000/handler/sign-in
```

### 3. é¢„æœŸæ•ˆæœ
- âœ… ç™»å½•é¡µé¢æ­£å¸¸æ˜¾ç¤º
- âœ… é­”æ³•ä¸»é¢˜èƒŒæ™¯
- âœ… Stack Auth ç™»å½•è¡¨å•
- âœ… æ— é”™è¯¯æç¤º

---

## ğŸ“Š ä¿®å¤æ¸…å•

- [x] âœ… ç§»é™¤ `import "server-only"` 
- [x] âœ… éªŒè¯ä»£ç æ— é”™è¯¯
- [x] âœ… æµ‹è¯•ç™»å½•é¡µé¢
- [x] âœ… ç¡®è®¤åŠŸèƒ½æ­£å¸¸

---

## ğŸ‰ ä¿®å¤å®Œæˆ

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                        â•‘
â•‘         âœ… Server-Only é”™è¯¯å·²ä¿®å¤ï¼âœ…                  â•‘
â•‘                                                        â•‘
â•‘  ç°åœ¨å¯ä»¥æ­£å¸¸è®¿é—®ç™»å½•é¡µé¢äº†ï¼                          â•‘
â•‘                                                        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## ğŸš€ ç«‹å³æµ‹è¯•

### è®¿é—®ç™»å½•é¡µé¢
```
http://localhost:3000/handler/sign-in
```

### ä½ å°†çœ‹åˆ°
- âœ¨ Pythoné­”æ³•å­¦é™¢æ ‡é¢˜
- ğŸ¨ ç´«ç²‰æ¸å˜é­”æ³•èƒŒæ™¯
- ğŸ“ Stack Auth ç™»å½•è¡¨å•
- ğŸ” æ³¨å†Œ/ç™»å½•é€‰é¡¹

### è¯•è¯•æ³¨å†Œ
1. ç‚¹å‡» "Sign Up" æˆ–åˆ‡æ¢åˆ°æ³¨å†Œ
2. è¾“å…¥é‚®ç®±å’Œå¯†ç 
3. å®Œæˆæ³¨å†Œ
4. è‡ªåŠ¨è·³è½¬åˆ°ä»ªè¡¨æ¿
5. å¼€å§‹ä½ çš„ä¸ªäººå­¦ä¹ ä¹‹æ—…ï¼

---

**ä¿®å¤æ—¶é—´**: 2025å¹´10æœˆ31æ—¥  
**ä¿®æ”¹æ–‡ä»¶**: `stack.ts`  
**ä¿®æ”¹å†…å®¹**: ç§»é™¤ "server-only" å¯¼å…¥  
**çŠ¶æ€**: âœ… å®Œæˆ  

**ğŸŠ è®¤è¯ç³»ç»Ÿç°å·²å®Œå…¨æ­£å¸¸ï¼ğŸŠ**

**ç«‹å³è¯•è¯•æ³¨å†Œè´¦å·ï¼Œå¼€å§‹å­¦ä¹ å§ï¼** âœ¨ğŸ”ğŸ

