# ✅ 快速部署清单 - Vercel

## 🎯 10分钟部署到线上

---

## 📝 部署前检查

### ✅ 代码准备

- [ ] 本地运行正常 (`npm run dev`)
- [ ] 没有报错
- [ ] 功能测试通过
- [ ] 数据库已初始化

### ✅ 数据库准备

- [ ] Neon 数据库已创建
- [ ] 已运行 `init-levels.ts`（关卡数据）
- [ ] 已运行 `init-achievements.ts`（成就数据）
- [ ] 复制好 DATABASE_URL

### ✅ 环境变量

准备以下信息：

```env
DATABASE_URL=postgresql://...
NEXT_PUBLIC_STACK_PROJECT_ID=xxx (可选)
NEXT_PUBLIC_STACK_PUBLISHABLE_CLIENT_KEY=xxx (可选)
STACK_SECRET_SERVER_KEY=xxx (可选)
```

---

## 🚀 5步部署

### 第1步：推送到 GitHub ⏱️ 2分钟

```bash
# 添加 .gitignore（确保已存在）
# 已包含 .env.local, node_modules 等

# 提交代码
git add .
git commit -m "部署到 Vercel"

# 创建 GitHub 仓库并推送
# （在 GitHub 创建仓库后）
git remote add origin https://github.com/你的用户名/pysty.git
git push -u origin main
```

### 第2步：注册 Vercel ⏱️ 1分钟

```
1. 访问 https://vercel.com
2. 点击 "Sign Up"
3. 选择 "Continue with GitHub"
4. 授权 Vercel
```

### 第3步：导入项目 ⏱️ 1分钟

```
1. Vercel 首页 → "Add New..." → "Project"
2. 找到 "pysty" 仓库
3. 点击 "Import"
```

### 第4步：配置环境变量 ⏱️ 2分钟

```
1. 在配置页面找到 "Environment Variables"

2. 添加 DATABASE_URL:
   Name: DATABASE_URL
   Value: postgresql://...
   Environment: Production, Preview, Development

3. （可选）添加 Stack Auth 变量

4. 不要点 "Deploy" 还！先检查配置
```

### 第5步：部署 ⏱️ 4分钟

```
1. 检查配置无误
2. 点击 "Deploy"
3. 等待构建（2-3分钟）
4. 看到 "🎉 Congratulations!"
5. 点击 "Visit" 访问网站
```

---

## ✅ 部署后验证

### 功能测试清单

访问你的 Vercel URL，测试：

- [ ] 首页正常显示
- [ ] 导航栏正常
- [ ] 学习中心加载
- [ ] 可以进入关卡
- [ ] 代码编辑器显示
- [ ] 代码可以运行
- [ ] 成就页面正常
- [ ] 用户可以登录（如果启用）
- [ ] 进度可以保存

### 如果有问题

```bash
# 1. 查看 Vercel 部署日志
Vercel 项目 → Deployments → 最新部署 → View Logs

# 2. 检查环境变量
Settings → Environment Variables

# 3. 重新部署
Deployments → ... → Redeploy
```

---

## 🎯 优化建议

### 启用分析

```
项目设置 → Analytics → Enable
```

### 添加自定义域名

```
项目设置 → Domains → Add Domain
```

### 配置 Git 集成

```
Settings → Git → 
✓ Automatically deploy main branch
✓ Preview deployments for all branches
```

---

## 📊 免费额度监控

### 查看用量

```
Vercel 账户设置 → Usage
```

### 免费额度

- 带宽: 100 GB/月
- 执行时间: 100 小时/月
- 边缘函数: 1000 小时/月

**你的项目估算**:
- 带宽: ~1-5 GB/月（轻松够用）
- 执行时间: ~5-10 小时/月（充足）

✅ **完全够用！**

---

## 🔄 持续部署

### 自动部署流程

```
本地修改代码
    ↓
git add .
git commit -m "更新功能"
git push
    ↓
Vercel 自动检测
    ↓
自动构建
    ↓
自动部署
    ↓
新版本上线！🎉
```

**时间**: 推送后2-3分钟自动上线

---

## 💡 实用技巧

### 技巧1: 预览部署

创建新分支测试功能：

```bash
git checkout -b feature-new
# 修改代码
git push origin feature-new
```

Vercel 自动创建预览 URL：
```
https://pysty-git-feature-new-xxx.vercel.app
```

### 技巧2: 回滚版本

发现新版本有bug：

```
1. Deployments 页面
2. 找到上一个正常版本
3. 点击 "..." → "Promote to Production"
4. 立即回滚！
```

### 技巧3: 查看实时日志

```
1. 项目页面 → Deployments
2. 点击最新部署
3. 查看 "Build Logs" 和 "Function Logs"
```

---

## 🎊 完成部署！

### 你的网站现在：

- ✅ 全球CDN加速
- ✅ 自动HTTPS
- ✅ 无限扩展
- ✅ 零运维
- ✅ 免费使用

### 分享给朋友

```
你的网站: https://pysty.vercel.app

分享链接，邀请朋友一起学Python！
```

---

## 📚 下一步

### 可选优化

1. **添加自定义域名** - 更专业
2. **配置 SEO** - 提升搜索排名
3. **启用 Analytics** - 了解访问情况
4. **设置监控** - 及时发现问题

### 持续改进

1. 收集用户反馈
2. 修复bug
3. 添加新功能
4. 推送代码
5. 自动部署！

---

**🎉 恭喜！你的 Python 魔法学院已经部署到全球！**

**总耗时**: 约 10 分钟
**成本**: $0（完全免费）
**性能**: ⭐⭐⭐⭐⭐

**开始分享你的项目吧！** 🚀✨

